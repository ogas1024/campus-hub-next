# è¯¾ç¨‹èµ„æºåˆ†äº«æ¨¡å—éœ€æ±‚è¯´æ˜ï¼ˆMVP å†»ç»“è‰æ¡ˆï¼‰

**çŠ¶æ€**ï¼šğŸŸ  å¾…å†»ç»“ï¼ˆç­‰å¾…ç¡®è®¤ï¼‰  
**ç‰ˆæœ¬**ï¼šv1.0-draftï¼ˆMVPï¼‰  
**æœ€è¿‘æ›´æ–°**ï¼š2025-12-18

> ä¸šåŠ¡å‚è€ƒæ¥æºï¼š`campus-hub-ruoyi/docs/requirements/è¯¾ç¨‹èµ„æºåˆ†äº«.md`ï¼ˆä»…ä½œä¸ºä¸šåŠ¡è¾“å…¥ï¼›æœ¬ä»“åº“æŒ‰ `campus-hub-next` æ¶æ„ä¸æœ€ä½³å®è·µé‡æ„è½åœ°ï¼‰ã€‚  
> ç›®æ ‡ï¼šåœ¨ä¸å¼•å…¥é¢å¤–ä»˜è´¹/å¤æ‚åŸºç¡€è®¾æ–½çš„å‰æä¸‹ï¼Œè½åœ°ä¸€ä¸ªâ€œå¯è¿è¡Œã€å¯æµ‹è¯•ã€å¯éƒ¨ç½²â€çš„è¯¾ç¨‹èµ„æºåˆ†äº« MVPã€‚

## 1. ç›®æ ‡ä¸å®šä½

- é¢å‘â€œä¸“ä¸š â†’ è¯¾ç¨‹ â†’ èµ„æºâ€çš„èµ„æ–™åˆ†äº«ã€å®¡æ ¸å‘å¸ƒä¸æ£€ç´¢ã€‚
- æ”¯æŒä¸¤ç±»èµ„æºï¼š
  - æ–‡ä»¶ï¼šä»…å‹ç¼©åŒ…ï¼ˆ`zip/rar/7z`ï¼‰ï¼Œæœ€å¤§ 200MB
  - å¤–é“¾ï¼šURLï¼ˆç”±å®¡æ ¸æŠŠå…³æœ‰æ•ˆæ€§ï¼‰
- æä¾›ä¸‹è½½è®¡æ•°ä¸æ’è¡Œæ¦œï¼ˆèµ„æºæ¦œ / ç”¨æˆ·ç§¯åˆ†æ¦œï¼‰ï¼Œå¹¶æ”¯æŒâ€œæœ€ä½³æ¨èâ€æ ‡è®°ã€‚

## 2. èŒƒå›´ï¼ˆScopeï¼‰

### 2.1 MVPï¼ˆæœ¬è½®å¿…é¡»å®ç°ï¼‰

**åŸºç¡€æ•°æ®**
- ä¸“ä¸šï¼ˆMajorï¼‰ç®¡ç†ï¼šå¢åˆ æ”¹æŸ¥ï¼ˆç®¡ç†ç«¯ï¼‰
- è¯¾ç¨‹ï¼ˆCourseï¼‰ç®¡ç†ï¼šå¢åˆ æ”¹æŸ¥ï¼ˆç®¡ç†ç«¯ï¼‰
- ä¸“ä¸šè´Ÿè´£äººï¼ˆmajor_leadï¼‰é…ç½®ï¼šä¸€ä¸ªä¸“ä¸šå¯é…ç½®å¤šä¸ªè´Ÿè´£äººï¼ˆç®¡ç†ç«¯ï¼‰

**èµ„æºæµç¨‹**
- èµ„æºæŠ•ç¨¿ï¼šåˆ›å»ºè‰ç¨¿ã€ç¼–è¾‘ã€åˆ é™¤ï¼ˆè½¯åˆ ï¼‰ã€æäº¤å®¡æ ¸
- å®¡æ ¸ï¼šé€šè¿‡/é©³å›ï¼ˆå¸¦ commentï¼‰
- å‘å¸ƒæ€ï¼šå·²å‘å¸ƒå¯ä¸‹æ¶ï¼›é©³å›/ä¸‹æ¶å¯é‡æ–°æäº¤
- ä¸‹è½½ï¼šç»Ÿä¸€é€šè¿‡ä¸‹è½½å…¥å£è®¡æ•°ï¼Œå†è·³è½¬ï¼ˆæ–‡ä»¶ä¸º signed urlï¼›å¤–é“¾ä¸º 302 åˆ°è§„èŒƒåŒ– URLï¼‰

**æ’åºä¸æ¦œå•**
- èµ„æºä¸‹è½½æ¦œï¼šæ”¯æŒ days çª—å£ï¼›æ”¯æŒ scopeï¼ˆå…¨ç«™/æŒ‰ä¸“ä¸š/æŒ‰è¯¾ç¨‹ï¼‰
- ç”¨æˆ·ç§¯åˆ†æ¦œï¼šæ”¯æŒå…¨ç«™/æŒ‰ä¸“ä¸šï¼›å±•ç¤ºä»£è¡¨ä½œ Top5ï¼›æ”¯æŒæŸ¥çœ‹æŸç”¨æˆ·çš„â€œå…¨éƒ¨ä»£è¡¨ä½œâ€

**æœ€ä½³æ¨èä¸ç§¯åˆ†**
- â€œæœ€ä½³æ¨èâ€æ ‡è®°ï¼šåŒä¸€èµ„æºè‡³å¤š 1 æ¡æœ€ä½³æ ‡è®°ï¼›å¯å–æ¶ˆ
- ç§¯åˆ†å‘æ”¾ï¼ˆå¯é…ç½®ï¼Œä¸”å¿…é¡»ä¿è¯â€œé¦–æ¬¡è¯­ä¹‰â€ï¼‰ï¼š
  - èµ„æº**ç¬¬ä¸€æ¬¡**å®¡æ ¸é€šè¿‡ï¼š+5ï¼ˆé»˜è®¤ï¼‰
  - èµ„æº**ç¬¬ä¸€æ¬¡**è¢«æ ‡è®°ä¸ºæœ€ä½³ï¼š+10ï¼ˆé»˜è®¤ï¼‰

### 2.2 éç›®æ ‡ï¼ˆOut of Scopeï¼‰

- ä»˜è´¹ä¸‹è½½/ç§¯åˆ†å…‘æ¢ã€P2P ä¼ è¾“
- å¤æ‚é˜²åˆ·ï¼ˆé™æµ/åä½œå¼Š/é£æ§ï¼‰â€”â€”MVP ä»…ä¿ç•™æœ€å°æ‰©å±•ç‚¹
- èµ„æºç‰ˆæœ¬ç®¡ç†ï¼ˆå·²å‘å¸ƒç‰ˆæœ¬ + æ–°ä¿®è®¢å¾…å®¡å¹¶å­˜ï¼‰

## 3. è§’è‰²ä¸æƒé™ï¼ˆRBAC + é¢†åŸŸèŒƒå›´ï¼‰

è¯´æ˜ï¼š
- Portal ç«¯ï¼šä»…è¦æ±‚ç™»å½•ï¼ˆ`requireUser`ï¼‰ï¼Œä¸å¼ºåˆ¶æƒé™ç ã€‚
- Console ç«¯ï¼šæŒ‰æƒé™ç ï¼ˆRBACï¼‰æ§åˆ¶å…¥å£ï¼›åŒæ—¶åœ¨ Service å±‚å¼ºåˆ¶æ‰§è¡Œâ€œä¸“ä¸šè´Ÿè´£äººèŒƒå›´â€è¿‡æ»¤ï¼ˆé¢†åŸŸèŒƒå›´ï¼‰ã€‚

### 3.1 è§’è‰²

- `user`ï¼šæµè§ˆã€ä¸‹è½½ã€æŠ•ç¨¿ä¸ç®¡ç†â€œæˆ‘ä¸Šä¼ çš„èµ„æºâ€ã€‚
- `major_lead`ï¼šå…·å¤‡ user èƒ½åŠ›ï¼›åœ¨ç®¡ç†ç«¯ä»…èƒ½ç®¡ç†/å®¡æ ¸å…¶è´Ÿè´£ä¸“ä¸šå†…çš„æ•°æ®ï¼ˆè¯¾ç¨‹/èµ„æºï¼‰ã€‚
- `admin` / `super_admin`ï¼šè·¨ä¸“ä¸šå…¨é‡ç®¡ç†ï¼ˆä¸“ä¸š/è´Ÿè´£äºº/è¯¾ç¨‹/èµ„æº/å®¡æ ¸/ç¡¬åˆ é™¤ç­‰ï¼‰ã€‚

### 3.2 ä¸“ä¸šè´Ÿè´£äººèŒƒå›´ï¼ˆå†»ç»“ï¼‰

- `major_lead` çš„â€œè´Ÿè´£å“ªäº›ä¸“ä¸šâ€ä¸ç¼–ç åœ¨æƒé™ç ä¸­ï¼Œè€Œæ˜¯ç”±**æ˜ å°„è¡¨**ç»´æŠ¤ï¼ˆè§ 7.2 `major_leads`ï¼‰ã€‚
- çº¦æŸï¼š
  - ä¸€ä¸ªç”¨æˆ·å¯è´Ÿè´£å¤šä¸ªä¸“ä¸šï¼ˆå¤šè¡Œæ˜ å°„ï¼‰ã€‚
  - ä¸€ä¸ªä¸“ä¸šå¯é…ç½®å¤šä¸ªè´Ÿè´£äººï¼ˆå¤šè¡Œæ˜ å°„ï¼‰ã€‚
- å¼ºåˆ¶å£å¾„ï¼šConsole ç«¯æ‰€æœ‰ä¸â€œä¸“ä¸š/è¯¾ç¨‹/èµ„æºâ€ç›¸å…³çš„æŸ¥è¯¢ä¸æ“ä½œï¼Œå¿…é¡»åœ¨åç«¯æŒ‰è¯¥æ˜ å°„è¡¨åšèŒƒå›´è¿‡æ»¤ï¼›å‰ç«¯éšè—ä»…ç”¨äº UXï¼Œä¸ä½œä¸ºå®‰å…¨è¾¹ç•Œã€‚

### 3.2 æƒé™ç ï¼ˆå»ºè®®ï¼Œmodule=resourceï¼‰

> çº¦å®šï¼šä¿æŒ 3 æ®µæƒé™ç ï¼ˆ`campus:<module>:<op>`ï¼‰ï¼Œé¿å…å¼•å…¥å¤šæ®µæƒé™ç å¯¼è‡´é€šé…åŒ¹é…ä¸å¯æ§ã€‚

- ä¸“ä¸šï¼ˆadmin/super_adminï¼‰
  - `campus:resource:major_list`
  - `campus:resource:major_create`
  - `campus:resource:major_update`
  - `campus:resource:major_delete`
  - `campus:resource:major_lead_update`ï¼ˆé…ç½®ä¸“ä¸šè´Ÿè´£äººï¼‰
- è¯¾ç¨‹ï¼ˆadmin å…¨é‡ï¼›major_lead ä»…æœ¬ä¸“ä¸šèŒƒå›´ï¼‰
  - `campus:resource:course_list`
  - `campus:resource:course_create`
  - `campus:resource:course_update`
  - `campus:resource:course_delete`
- èµ„æºï¼ˆç®¡ç†ç«¯ï¼‰
  - `campus:resource:list`
  - `campus:resource:read`
  - `campus:resource:review`ï¼ˆapprove/rejectï¼‰
  - `campus:resource:offline`ï¼ˆä¸‹æ¶ï¼‰
  - `campus:resource:best`ï¼ˆbest/unbestï¼‰
  - `campus:resource:stats`
  - `campus:resource:delete`ï¼ˆç¡¬åˆ é™¤ï¼›ä»… admin/super_adminï¼‰

## 4. å…³é”®ç”¨ä¾‹ï¼ˆUse Casesï¼‰

- UC-R1ï¼šä½œä¸º userï¼Œåœ¨ `/resources` æµè§ˆä¸“ä¸š â†’ è¯¾ç¨‹ â†’ å·²å‘å¸ƒèµ„æºåˆ—è¡¨ï¼Œå¹¶å¯ä¸‹è½½ã€‚
- UC-R2ï¼šä½œä¸º userï¼Œåœ¨â€œæˆ‘ä¸Šä¼ çš„â€ä¸­åˆ›å»ºè‰ç¨¿å¹¶ä¸Šä¼ æ–‡ä»¶/å¡«å†™å¤–é“¾ï¼Œæäº¤å®¡æ ¸ã€‚
- UC-R3ï¼šä½œä¸º major_leadï¼Œåœ¨ `/console/resources` å®¡æ ¸æœ¬ä¸“ä¸šå¾…å®¡èµ„æºï¼šé€šè¿‡/é©³å›ï¼ˆå¡«å†™ç†ç”±ï¼‰ã€‚
- UC-R4ï¼šä½œä¸º major_leadï¼Œå¯¹æœ¬ä¸“ä¸šå·²å‘å¸ƒèµ„æºæ‰§è¡Œä¸‹æ¶ç»´æŠ¤ï¼›ä¸å¯ç¡¬åˆ é™¤ã€‚
- UC-R5ï¼šä½œä¸º admin/super_adminï¼Œè·¨ä¸“ä¸šç®¡ç†ä¸“ä¸š/è¯¾ç¨‹/è´Ÿè´£äººï¼Œå®¡æ ¸èµ„æºï¼Œç¡¬åˆ é™¤èµ„æºã€‚
- UC-R6ï¼šä½œä¸ºä»»æ„ç™»å½•ç”¨æˆ·ï¼ŒæŸ¥çœ‹ä¸‹è½½æ¦œ/ç§¯åˆ†æ¦œï¼Œå¹¶æŸ¥çœ‹æŸç”¨æˆ·çš„ä»£è¡¨ä½œ Top5/å…¨éƒ¨ä»£è¡¨ä½œã€‚

## 5. çŠ¶æ€æœºä¸ä¸šåŠ¡è§„åˆ™

### 5.1 èµ„æºçŠ¶æ€æœºï¼ˆå†»ç»“ï¼‰

```mermaid
stateDiagram-v2
  [*] --> draft: åˆ›å»ºè‰ç¨¿
  draft --> pending: æäº¤å®¡æ ¸
  pending --> published: å®¡æ ¸é€šè¿‡
  pending --> rejected: å®¡æ ¸é©³å›(comment)
  published --> unpublished: ä¸‹æ¶
  rejected --> pending: é‡æ–°æäº¤
  unpublished --> pending: é‡æ–°æäº¤
```

### 5.2 ç¼–è¾‘ä¸åˆ é™¤ç­–ç•¥ï¼ˆå†»ç»“ï¼‰

- `draft/rejected/unpublished`ï¼šå…è®¸ä½œè€…ç¼–è¾‘ã€‚
- `pending`ï¼šä¸å…è®¸ä½œè€…ç¼–è¾‘ï¼ˆé¿å…â€œæäº¤åå†…å®¹å˜åŒ–â€å¯¼è‡´å®¡æ ¸ä¸ä¸€è‡´ï¼‰ï¼›éœ€è¦å…ˆæ’¤å›åˆ° `draft`ï¼ˆMVP å¯ä¸æä¾›æ’¤å›æŒ‰é’®ï¼‰æˆ–ç­‰å¾…å®¡æ ¸ç»“è®ºã€‚
- `published`ï¼šä½œè€…ä¸å…è®¸ç›´æ¥ç¼–è¾‘ï¼›å¦‚éœ€ä¿®è®¢ï¼ŒæŒ‰â€œä¸‹æ¶ â†’ ç¼–è¾‘ â†’ é‡æ–°æäº¤â€æµç¨‹ã€‚
- åˆ é™¤ï¼š
  - Portal ä¾§ï¼ˆä½œè€…ï¼‰ï¼šä»…å…è®¸åˆ é™¤ `draft/rejected/unpublished`
  - Console ä¾§ï¼ˆadmin/super_adminï¼‰ï¼šå…è®¸ç¡¬åˆ é™¤ï¼ˆä»…åˆ åº“ï¼›ä¸åˆ  Storage å¯¹è±¡ï¼‰
  - `major_lead`ï¼šä¸å…è®¸åˆ é™¤ï¼Œä»…å…è®¸ä¸‹æ¶ç»´æŠ¤

### 5.3 å»é‡è§„åˆ™ï¼ˆå†»ç»“ï¼‰

- æ–‡ä»¶ï¼šåŒä¸€è¯¾ç¨‹ç»´åº¦ï¼Œ`sha256` ä¸å…è®¸é‡å¤ã€‚é‡å¤èµ„æº**ä¸å¯æäº¤å®¡æ ¸/ä¸å¯å‘å¸ƒ**ã€‚
- å¤–é“¾ï¼šåŒä¸€è¯¾ç¨‹ç»´åº¦ï¼Œâ€œè§„èŒƒåŒ– URLâ€ä¸å…è®¸é‡å¤ã€‚é‡å¤èµ„æº**ä¸å¯æäº¤å®¡æ ¸/ä¸å¯å‘å¸ƒ**ã€‚

> è¯´æ˜ï¼šé‡å¤åˆ¤å®šä»¥â€œæœªåˆ é™¤ï¼ˆdeleted_at IS NULLï¼‰â€çš„æ•°æ®ä¸ºå‡†ï¼›åç»­å¦‚å¢åŠ â€œå›æ”¶ç«™/æ¢å¤â€èƒ½åŠ›ï¼Œå†è®¨è®ºå†²çªç­–ç•¥ã€‚

### 5.4 URL è§„èŒƒåŒ–ï¼ˆå†»ç»“å£å¾„ï¼‰

è§„èŒƒåŒ–ç›®æ ‡ï¼šä¿è¯â€œåŒä¸€è¯­ä¹‰é“¾æ¥â€åœ¨ DB å±‚å…·å¤‡ç¨³å®šè¡¨ç¤ºï¼Œæ”¯æ’‘å”¯ä¸€çº¦æŸã€‚

å»ºè®®è§„åˆ™ï¼ˆå®ç°ä»¥æœ€ç»ˆä»£ç ä¸ºå‡†ï¼‰ï¼š
- trim ç©ºç™½ï¼›è§£æä¸ºåˆæ³• URLï¼Œå¦åˆ™æŠ¥é”™
- scheme/host å°å†™ï¼›ç§»é™¤ fragment
- ç§»é™¤é»˜è®¤ç«¯å£ï¼ˆ80/443ï¼‰
- query å‚æ•°æŒ‰ key/value æ’åºåé‡å»º
- path æœ«å°¾ `/` å½’ä¸€ï¼ˆä¿ç•™æ ¹è·¯å¾„ `/`ï¼‰

### 5.5 ä¸‹è½½è®¡æ•°ï¼ˆMVP å£å¾„ï¼‰

- æ‰€æœ‰ä¸‹è½½é€šè¿‡ç»Ÿä¸€å…¥å£è§¦å‘â€œä¸‹è½½äº‹ä»¶â€å†™å…¥ï¼ˆappend-onlyï¼‰ï¼Œå¹¶å†—ä½™ç»´æŠ¤ `download_count/last_download_at`ï¼ˆåŠ é€Ÿæ’åºï¼‰ã€‚
- MVP ä¸åšå¤æ‚é˜²åˆ·ï¼›åç»­å¯å¯¹â€œåŒç”¨æˆ·çŸ­æ—¶é—´é‡å¤ä¸‹è½½â€åšæœ€å°é—´éš”æˆ–åˆå¹¶è®¡æ•°ã€‚

### 5.6 â€œé¦–æ¬¡ç§¯åˆ†â€è¯­ä¹‰ï¼ˆå†»ç»“ï¼‰

- é€šè¿‡â€œç§¯åˆ†äº‹ä»¶è¡¨â€å”¯ä¸€çº¦æŸä¿è¯å¹‚ç­‰ï¼š
  - å”¯ä¸€é”®ï¼š`(user_id, resource_id, event_type)`
  - é‡å¤æ’å…¥è§†ä¸ºâ€œå·²å‘æ”¾â€ï¼Œä¸å¾—é‡å¤ç´¯è®¡
- åˆ†å€¼ä» `app_config` è¯»å–ï¼ˆå¯åœ¨çº¿ä¿®æ”¹ï¼‰ï¼Œé»˜è®¤ï¼š
  - `courseResources.score.approveDelta = 5`
  - `courseResources.score.bestDelta = 10`

## 6. å­˜å‚¨ä¸å®‰å…¨ï¼ˆ200MB å¤§æ–‡ä»¶æœ€ä½³å®è·µï¼‰

### 6.1 ä¸Šä¼ ï¼šå®¢æˆ·ç«¯ç›´ä¼  + æœåŠ¡ç«¯ç­¾åï¼ˆå†»ç»“ï¼‰

åŸå› ï¼š200MB æ–‡ä»¶åœ¨ Serverless/Next Route Handler ä¸­è½¬ä¸Šä¼ ä¸å¯é ï¼ˆè¶…æ—¶/è¯·æ±‚ä½“é™åˆ¶/æˆæœ¬ï¼‰ï¼Œå› æ­¤å¿…é¡»ç›´ä¼ å¯¹è±¡å­˜å‚¨ã€‚

æµç¨‹ï¼ˆæ¦‚è§ˆï¼‰ï¼š
1) å®¢æˆ·ç«¯åˆ›å»ºèµ„æºè‰ç¨¿ï¼ˆè·å¾— `resourceId`ï¼‰
2) å®¢æˆ·ç«¯è¯·æ±‚æœåŠ¡ç«¯ç”Ÿæˆâ€œç­¾åä¸Šä¼  URLâ€ï¼ˆæ ¡éªŒæ–‡ä»¶å¤§å°/æ‰©å±•å/sha256ï¼‰
3) å®¢æˆ·ç«¯ä½¿ç”¨ç­¾å URL ç›´ä¼  Supabase Storage
4) å®¢æˆ·ç«¯ä¿å­˜èµ„æºè‰ç¨¿ï¼ˆå†™å…¥ `fileKey/fileName/size/sha256`ï¼‰
5) æäº¤å®¡æ ¸ï¼ˆå»é‡æ ¡éªŒåœ¨æ­¤é˜¶æ®µå¼ºåˆ¶æ‰§è¡Œï¼‰

### 6.2 ä¸‹è½½ï¼šçŸ­æ—¶ç­¾å URLï¼ˆå†»ç»“ï¼‰

- æ–‡ä»¶èµ„æºï¼šåç«¯ç”ŸæˆçŸ­æ—¶ signed url å¹¶ 302 é‡å®šå‘ï¼ˆæˆ–è¿”å› url ç”±å‰ç«¯è·³è½¬ï¼‰ï¼›åŒæ—¶å†™å…¥ä¸‹è½½äº‹ä»¶/æ›´æ–°è®¡æ•°ã€‚
- å¤–é“¾èµ„æºï¼šåç«¯ç›´æ¥ 302 åˆ°è§„èŒƒåŒ– URLï¼ˆåŒæ ·å†™å…¥ä¸‹è½½äº‹ä»¶/æ›´æ–°è®¡æ•°ï¼‰ã€‚

### 6.3 æ–‡ä»¶æ ¡éªŒï¼ˆå†»ç»“ï¼‰

- ä»…å…è®¸æ‰©å±•åï¼š`.zip/.rar/.7z`
- å¤§å°ï¼š`0 < size <= 200MB`
- å†…å®¹ç±»å‹ï¼šä¸ä½œä¸ºå”¯ä¸€ä¾æ®ï¼ˆä¸åŒæµè§ˆå™¨å¯èƒ½ä¸å¯é ï¼‰ï¼Œä»¥æ‰©å±•å + åç«¯è§„åˆ™ä¸ºå‡†

## 7. æ•°æ®æ¨¡å‹ï¼ˆæ¦‚è§ˆï¼Œæ–¹æ¡ˆä¸€ï¼šäº‹ä»¶è¡¨é©±åŠ¨ï¼‰

> å‘½åä»¥ `campus-hub-next` ä¸ºå‡†ï¼Œé»˜è®¤ uuid ä¸»é”®ã€`timestamptz`ã€è½¯åˆ å­—æ®µ `deleted_at`ã€‚

### 7.1 majorsï¼ˆä¸“ä¸šï¼‰

- `id, name(å”¯ä¸€), enabled, sort, remark, created_at, updated_at, deleted_at`

### 7.2 major_leadsï¼ˆä¸“ä¸šè´Ÿè´£äººæ˜ å°„ï¼‰

- å¤åˆå”¯ä¸€/ä¸»é”®ï¼š`(major_id, user_id)`
- å¤–é”®ï¼š
  - `major_id` â†’ `majors.id`ï¼ˆåˆ é™¤ä¸“ä¸šæ—¶çº§è”åˆ é™¤æ˜ å°„ï¼‰
  - `user_id` â†’ `profiles.id`ï¼ˆæˆ– `auth.users.id`ï¼Œä»¥æœ€ç»ˆ schema ä¸ºå‡†ï¼‰
- å…¸å‹ç”¨é€”ï¼š
  - `user_id -> major_id[]`ï¼šmajor_lead ç™»å½•åå¯è§/å¯ç®¡çš„ä¸“ä¸šé›†åˆ
  - `major_id -> user_id[]`ï¼šä¸“ä¸šè´Ÿè´£äººé…ç½®åˆ—è¡¨ï¼ˆç”¨äºåå°é…ç½®ä¸æ˜¾ç¤ºï¼‰

### 7.3 coursesï¼ˆè¯¾ç¨‹ï¼‰

- `id, major_id, name(åŒä¸“ä¸šå”¯ä¸€), code(å¯é€‰), enabled, sort, remark, created_at, updated_at, deleted_at`

### 7.4 course_resourcesï¼ˆè¯¾ç¨‹èµ„æºï¼‰

- å½’å±ï¼š`major_id(å†—ä½™), course_id, created_by`
- ç±»å‹ï¼š`resource_type = file|link`
- æ–‡ä»¶ï¼š`file_bucket, file_key, file_name, file_size, sha256`
- å¤–é“¾ï¼š`link_url, link_url_normalized`
- å®¡æ ¸ï¼š`status, submitted_at, reviewed_by, reviewed_at, review_comment`
- å‘å¸ƒï¼š`published_at, unpublished_at`
- ç»Ÿè®¡ï¼š`download_count, last_download_at`
- å®¡è®¡å­—æ®µï¼š`created_at, updated_at, deleted_at`

### 7.5 course_resource_bestsï¼ˆæœ€ä½³æ ‡è®°ï¼‰

- å¤åˆå”¯ä¸€ï¼š`resource_id`ï¼ˆä¸€æ¡èµ„æºæœ€å¤šä¸€æ¡æœ€ä½³ï¼‰
- `best_by, best_at`

### 7.6 course_resource_download_eventsï¼ˆä¸‹è½½äº‹ä»¶ï¼Œäº‹å®è¡¨ï¼‰

- `id, resource_id, user_id(å¯ç©º), occurred_at, ip, user_agent`
- ç”¨äº days çª—å£ç»Ÿè®¡ä¸å›æ”¾ä¿®å¤

### 7.7 course_resource_score_eventsï¼ˆç§¯åˆ†äº‹ä»¶ï¼Œäº‹å®è¡¨ï¼‰

- `event_type = approve|best`
- `id, user_id, major_id, resource_id, event_type, delta, occurred_at`
- å¤åˆå”¯ä¸€ï¼š`(user_id, resource_id, event_type)`ï¼ˆä¿è¯é¦–æ¬¡ï¼‰

## 8. é¡µé¢ç»“æ„ä¸äº¤äº’è‰å›¾ï¼ˆMVPï¼‰

### 8.1 Portalï¼ˆ/resourcesï¼‰

- `/resources`ï¼šä¸“ä¸šå¡ç‰‡åˆ—è¡¨
- `/resources/courses?majorId=...`ï¼šè¯¾ç¨‹å¡ç‰‡åˆ—è¡¨
- `/resources/list?courseId=...`ï¼šèµ„æºåˆ—è¡¨ï¼ˆä»… publishedï¼›æœ€ä½³èµ„æºå¾½æ ‡å¹¶ç½®é¡¶ï¼‰
- `/resources/my`ï¼šæˆ‘ä¸Šä¼ çš„ï¼ˆæŒ‰çŠ¶æ€åˆ†ç»„/ç­›é€‰ï¼›è‰ç¨¿ç¼–è¾‘ã€æäº¤å®¡æ ¸ã€ä¸‹æ¶åç»´æŠ¤ï¼‰
- `/resources/top`ï¼šæ’è¡Œæ¦œ
  - èµ„æºä¸‹è½½æ¦œï¼šscopeï¼ˆå…¨ç«™/ä¸“ä¸š/è¯¾ç¨‹ï¼‰+ days
  - ç”¨æˆ·ç§¯åˆ†æ¦œï¼šscopeï¼ˆå…¨ç«™/ä¸“ä¸šï¼‰+ ä»£è¡¨ä½œ Top5 + ç”¨æˆ·æŠ½å±‰æŸ¥çœ‹å…¨éƒ¨ä»£è¡¨ä½œ

### 8.2 Consoleï¼ˆ/console/resourcesï¼‰

- ä¸“ä¸šç®¡ç†ï¼ˆadmin/super_adminï¼‰ï¼šä¸“ä¸š CRUDã€è´Ÿè´£äººé…ç½®ï¼ˆå¤šé€‰ç”¨æˆ·ï¼‰
- è¯¾ç¨‹ç®¡ç†ï¼ˆadmin å…¨é‡ï¼›major_lead ä»…æœ¬ä¸“ä¸šå¯è§/å¯æ“ä½œï¼‰
- èµ„æºå®¡æ ¸ï¼š
  - å¾…å®¡åˆ—è¡¨ï¼ˆpendingï¼‰ï¼šapprove/reject(comment)
  - å·²å‘å¸ƒï¼ˆpublishedï¼‰ï¼šofflineï¼›best/unbest
  - å›æ”¶ç«™ï¼ˆrejected/unpublishedï¼‰ï¼šæŸ¥çœ‹ä¸å¤„ç†
  - ç¡¬åˆ é™¤ï¼ˆä»… admin/super_adminï¼‰

## 9. éªŒæ”¶æ ‡å‡†ï¼ˆMVPï¼‰

- major_lead åœ¨ Console ä¸‹ä»…èƒ½çœ‹åˆ°å¹¶æ“ä½œå…¶è´Ÿè´£ä¸“ä¸šèŒƒå›´å†…çš„æ•°æ®ï¼ˆåç«¯å¼ºåˆ¶è¿‡æ»¤ï¼‰ã€‚
- user å¯åˆ›å»ºè‰ç¨¿å¹¶å®Œæˆâ€œç­¾åç›´ä¼ ä¸Šä¼  â†’ ä¿å­˜è‰ç¨¿ â†’ æäº¤å®¡æ ¸â€ï¼›é‡å¤ sha256/URL çš„èµ„æºæ— æ³•æäº¤å®¡æ ¸ã€‚
- major_lead å¯ approve/rejectï¼Œä¸” approve ä¼šè§¦å‘â€œé¦–æ¬¡é€šè¿‡â€ç§¯åˆ†ï¼ˆå¹‚ç­‰ï¼Œä¸é‡å¤å‘æ”¾ï¼‰ã€‚
- best/unbest å¯æ“ä½œï¼›é¦–æ¬¡ best ä¼šè§¦å‘â€œé¦–æ¬¡æœ€ä½³â€ç§¯åˆ†ï¼ˆå¹‚ç­‰ï¼‰ã€‚
- ä¸‹è½½å…¥å£ä¼šè®¡æ•°å¹¶è·³è½¬ï¼›æ¦œå•æŒ‰ days çª—å£æ­£ç¡®è¿”å›ï¼›ç”¨æˆ·ç§¯åˆ†æ¦œå±•ç¤ºä»£è¡¨ä½œ Top5 ä¸”å¯æŸ¥çœ‹å…¨éƒ¨ä»£è¡¨ä½œã€‚

## 10. å¾…ç¡®è®¤ï¼ˆæœ¬è½®å·²å†»ç»“ï¼Œæ— é—ç•™ï¼‰

- æœ¬æ–‡æ¡£ä¸ºå¾…å†»ç»“è‰æ¡ˆï¼›å¾…ä½ ç¡®è®¤åå°†çŠ¶æ€æ”¹ä¸º âœ… å·²æ‰¹å‡†ï¼Œå¹¶è¿›å…¥ DB/API/å®ç°é˜¶æ®µã€‚
